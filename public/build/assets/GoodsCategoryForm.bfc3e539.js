import{l as k,s as x,d as r,w as N,x as n,y as u,z as c,Q as m,A as d,B as p,D as j,M as I,C as O,F as b}from"./vue.m.26e38986.js";import{g as A,l as T,b as G,a as M}from"./goodsTypeRepository.3648a2a1.js";import{a as $,_ as w}from"./FormControl.ec8216db.js";import{Z as U,X as q,_ as D,u as z,Y as E}from"./Api.4fdb4a26.js";const L={class:"flex justify-between"},Y={__name:"GoodsCategoryForm",props:{categoryData:{type:Object},buttonCloseForm:{type:Boolean,default:!1},mode:{type:String,default:"create"}},emits:["created","close-form","updated"],setup(C,{emit:V}){const s=C,t=k({categoryId:null,mode:"create",categoryData:s.categoryData}),y=(e,o)=>{t.mode!=e&&(t.mode=e),o&&(t.categoryId=o)},a=k({id:x(()=>t.categoryId),name:null,goods_type:"Common"}),B=()=>{Object.assign(t.categoryData,{name:a.name,goods_type:a.goods_type})},f=r(null),g=r(!1),i=r(null),F=()=>{g.value=!0,E("categories/store","post",a).setLoader(g).setErrors(f).success(e=>{i.value=e!=null&&e.id?"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D\u0430":"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430",t.mode=="create"?(y("update",e.id),V("created")):(V("updated"),B())}).run()},_=r("\u0421\u043E\u0437\u0434\u0430\u0442\u044C"),v=r("\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438");N(()=>t.mode,e=>{e=="update"?(_.value="\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",v.value="\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438"):(_.value="\u0421\u043E\u0437\u0434\u0430\u0442\u044C",v.value="\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438")});const S=()=>{a.name="",t.categoryId=null,y("create")};return s.categoryData&&(t.categoryId=s.categoryData.id,Object.assign(a,{name:s.categoryData.name,goods_type:s.categoryData.goods_type})),s.mode=="update"&&y("update"),(e,o)=>(n(),u(M,{title:v.value,form:"",onSubmit:b(F,["prevent"])},{default:c(()=>[f.value?(n(),u(U,{key:0,errors:f.value,class:"-mt-6"},null,8,["errors"])):m("",!0),d($,{label:"\u0418\u043C\u044F \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438"},{default:c(()=>[d(w,{modelValue:a.name,"onUpdate:modelValue":o[0]||(o[0]=l=>a.name=l),icon:p(q),placeholder:"\u041D\u0430\u043F\u0438\u0442\u043A\u0438"},null,8,["modelValue","icon"])]),_:1}),d($,{label:"\u0422\u0438\u043F \u0442\u043E\u0432\u0430\u0440\u0430"},{default:c(()=>[d(w,{modelValue:a.goods_type,"onUpdate:modelValue":o[1]||(o[1]=l=>a.goods_type=l),options:p(A),loader:p(T)},null,8,["modelValue","options","loader"])]),_:1}),i.value?(n(),u(G,{key:1,color:"success",timeout:"5000",onDismiss:o[2]||(o[2]=l=>i.value=null)},{default:c(()=>[j(I(i.value),1)]),_:1})):m("",!0),O("div",L,[d(D,{type:"submit",color:"success",label:_.value,loader:g.value},null,8,["label","loader"]),t.mode=="update"?(n(),u(D,{key:0,type:"submit",color:"success",label:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0435\u0449\u0435 \u043E\u0434\u043D\u0443",icon:p(z),onClick:b(S,["prevent"])},null,8,["icon","onClick"])):m("",!0),C.buttonCloseForm?(n(),u(D,{key:1,type:"submit",color:"danger",label:"\u041E\u0442\u043C\u0435\u043D\u0430",onClick:o[3]||(o[3]=b(l=>e.$emit("close-form"),["prevent"]))})):m("",!0)])]),_:1},8,["title","onSubmit"]))}};export{Y as _};
