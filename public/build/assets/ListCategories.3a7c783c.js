import{l as $,d as h,w as H,x as a,G as r,y as c,B as o,Q as n,E as b,O as k,P as N,z as _,A as i,F as p,M as y,U as B,C,H as T}from"./vue.m.04f36914.js";import{b as V,S as L,c as M}from"./LayoutAuthenticated.34774dec.js";import{a as G}from"./goodsTypeRepository.83bb2173.js";import{u as U}from"./categories.e04c3c33.js";import{u as j,_ as q,C as D,d as A,a4 as Q,a5 as Y,a8 as J,i as K,Y as S}from"./Api.40434020.js";import{s as W}from"./adminApp.1e8afdfc.js";import{A as X}from"./ActionButtons.1e91f229.js";import{_ as z}from"./GoodsCategoryForm.e11663c1.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./FormControl.a9c55027.js";import"./index.2a7b1da3.js";const Z={key:0},tt={key:0,class:"bg-gray-50 -mt-6 -mx-6 p-4 text-zinc-500 md:w-6/12"},et=["onClick"],st=p("\u0412\u0432\u0435\u0440\u0445 "),at=["onClick"],ot=p("\u0412\u043D\u0438\u0437 "),nt=C("span",{class:"text-zinc-400"},"\u041F\u043E\u0437\u0438\u0446\u0438\u044F:",-1),it=C("br",null,null,-1),rt=C("span",{class:"text-zinc-400"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0442\u043E\u0432\u0430\u0440\u043E\u0432:",-1),lt={__name:"GoodsCategoryList",props:{},setup(E){const l=U(),{listCategories:u,loading:g}=W(l),{fetchAllCategories:d,removeById:O}=l;$({}),d();const m=$({}),P=e=>{m[e]=!m[e]},f=h(!1),w={},I=e=>{e.forEach(s=>{w[s.id]=new X([{id:"actionRemove",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",icon:K,isActive:h(!1),click(){confirm("\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E \u0432\u043C\u0435\u0441\u0442\u0435 \u0441 \u0442\u043E\u0432\u0430\u0440\u0430\u043C\u0438?")&&S("categories/delete","post",{id:s.id}).success(t=>{O(s.id)}).run()}}])})},R=(e,s)=>{const t={up:!1,down:!1};e.sortpos==0&&!s?t.down=!0:e.sortpos>0&&!s?(t.up=!0,t.down=!0):e.sortpos>0&&s&&(t.up=!0),e.sortParams=t},F=(e,s)=>{e.forEach(t=>R(t,t.sortpos==s-1))},x=(e,s)=>{S("categories/sort","post",{direction:e,category_id:s}).success(t=>{l.loading=!0,d(!0)}).run()};return H(u,e=>{I(e),F(e,e.length)}),(e,s)=>(a(),r(k,null,[f.value?(a(),c(z,{key:0,onCreated:s[0]||(s[0]=t=>o(d)(!0))})):n("",!0),f.value?n("",!0):(a(),c(q,{key:1,class:"mb-2 mx-2",color:"success",label:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",icon:o(j),onClick:s[1]||(s[1]=b(t=>f.value=!0,["prevent"]))},null,8,["icon"])),o(g)?(a(),c(D,{key:2,size:"64",class:"mx-auto"})):n("",!0),(a(!0),r(k,null,N(o(u),t=>(a(),c(G,{key:t.id,title:t.name,empty:!o(u).length,"empty-message":"\u041F\u043E\u043A\u0430 \u043D\u0435\u0442 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439","header-icon":o(J),onHeaderIconClick:v=>P(t.id),"action-button-manager":w[t.id]},{default:_(()=>[i(B,{"enter-active-class":"animate__animated animate__slideInLeft","leave-active-class":"animate__animated animate__bounceOutRight"},{default:_(()=>[m[t.id]?n("",!0):(a(),r("div",Z,[t.sortParams?(a(),r("div",tt,[t.sortParams.up?(a(),r("a",{key:0,class:"hover:text-zinc-600",onClick:b(v=>x("up",t.id),["prevent"])},[st,i(A,{path:o(Q)},null,8,["path"])],8,et)):n("",!0),t.sortParams.down?(a(),r("a",{key:1,class:"hover:text-zinc-600",onClick:v=>x("down",t.id)},[ot,i(A,{path:o(Y)},null,8,["path"])],8,at)):n("",!0)])):n("",!0),nt,p(" "+y(t.sortpos)+" ",1),it,rt,p(" "+y(t.count_goods),1)]))]),_:2},1024),i(B,{"enter-active-class":"animate__animated animate__slideInLeft","leave-active-class":"animate__animated animate__bounceOutRight"},{default:_(()=>[m[t.id]?(a(),c(z,{key:0,categoryData:t,mode:"update",onCreated:s[2]||(s[2]=v=>o(d)(!0))},null,8,["categoryData"])):n("",!0)]),_:2},1024)]),_:2},1032,["title","empty","header-icon","onHeaderIconClick","action-button-manager"]))),128))],64))}},ct={layout:M},wt=Object.assign(ct,{__name:"ListCategories",props:{},setup(E){const l=h(["\u0410\u0434\u043C\u0438\u043D \u043F\u0430\u043D\u0435\u043B\u044C","\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u0442\u043E\u0432\u0430\u0440\u043E\u0432"]);return(u,g)=>(a(),r(k,null,[i(o(T),{title:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u0442\u043E\u0432\u0430\u0440\u043E\u0432"}),i(V,{"title-stack":l.value},null,8,["title-stack"]),i(L,null,{default:_(()=>[i(lt)]),_:1})],64))}});export{wt as default};
