import{l as $,d as k,w as H,x as a,G as r,y as c,B as o,Q as n,F as b,O as h,P as N,z as p,A as i,D as _,M as y,U as B,C,H as T}from"./vue.m.1a5bfe17.js";import{b as V,S as L,c as M}from"./LayoutAuthenticated.70157419.js";import{a as D}from"./goodsTypeRepository.e28ff620.js";import{u as G}from"./categories.6d6ad1b4.js";import{u as U,_ as j,C as q,d as A,a4 as Q,a5 as Y,a8 as J,i as K,Y as S}from"./Api.38888a39.js";import{s as W}from"./adminApp.15818c67.js";import{A as X}from"./ActionButtons.c5d4e461.js";import{_ as z}from"./GoodsCategoryForm.c72ae00b.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./FormControl.8d8a1e31.js";import"./index.c46e732a.js";const Z={key:0},tt={key:0,class:"bg-gray-50 -mt-6 -mx-6 p-4 text-zinc-500 md:w-6/12"},et=["onClick"],st=["onClick"],at=C("span",{class:"text-zinc-400"},"\u041F\u043E\u0437\u0438\u0446\u0438\u044F:",-1),ot=C("br",null,null,-1),nt=C("span",{class:"text-zinc-400"},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0442\u043E\u0432\u0430\u0440\u043E\u0432:",-1),it={__name:"GoodsCategoryList",props:{},setup(O){const l=G(),{listCategories:u,loading:g}=W(l),{fetchAllCategories:m,removeById:P}=l;$({}),m();const d=$({}),E=e=>{d[e]=!d[e]},f=k(!1),w={},I=e=>{e.forEach(s=>{w[s.id]=new X([{id:"actionRemove",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",icon:K,isActive:k(!1),click(){confirm("\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E \u0432\u043C\u0435\u0441\u0442\u0435 \u0441 \u0442\u043E\u0432\u0430\u0440\u0430\u043C\u0438?")&&S("categories/delete","post",{id:s.id}).success(t=>{P(s.id)}).run()}}])})},R=(e,s)=>{const t={up:!1,down:!1};e.sortpos==0&&!s?t.down=!0:e.sortpos>0&&!s?(t.up=!0,t.down=!0):e.sortpos>0&&s&&(t.up=!0),e.sortParams=t},F=(e,s)=>{e.forEach(t=>R(t,t.sortpos==s-1))},x=(e,s)=>{S("categories/sort","post",{direction:e,category_id:s}).success(t=>{l.loading=!0,m(!0)}).run()};return H(u,e=>{I(e),F(e,e.length)}),(e,s)=>(a(),r(h,null,[f.value?(a(),c(z,{key:0,onCreated:s[0]||(s[0]=t=>o(m)(!0))})):n("",!0),f.value?n("",!0):(a(),c(j,{key:1,class:"mb-2 mx-2",color:"success",label:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",icon:o(U),onClick:s[1]||(s[1]=b(t=>f.value=!0,["prevent"]))},null,8,["icon"])),o(g)?(a(),c(q,{key:2,size:"64",class:"mx-auto"})):n("",!0),(a(!0),r(h,null,N(o(u),t=>(a(),c(D,{key:t.id,title:t.name,empty:!o(u).length,"empty-message":"\u041F\u043E\u043A\u0430 \u043D\u0435\u0442 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439","header-icon":o(J),onHeaderIconClick:v=>E(t.id),"action-button-manager":w[t.id]},{default:p(()=>[i(B,{"enter-active-class":"animate__animated animate__slideInLeft","leave-active-class":"animate__animated animate__bounceOutRight"},{default:p(()=>[d[t.id]?n("",!0):(a(),r("div",Z,[t.sortParams?(a(),r("div",tt,[t.sortParams.up?(a(),r("a",{key:0,class:"hover:text-zinc-600",onClick:b(v=>x("up",t.id),["prevent"])},[_("\u0412\u0432\u0435\u0440\u0445 "),i(A,{path:o(Q)},null,8,["path"])],8,et)):n("",!0),t.sortParams.down?(a(),r("a",{key:1,class:"hover:text-zinc-600",onClick:v=>x("down",t.id)},[_("\u0412\u043D\u0438\u0437 "),i(A,{path:o(Y)},null,8,["path"])],8,st)):n("",!0)])):n("",!0),at,_(" "+y(t.sortpos)+" ",1),ot,nt,_(" "+y(t.count_goods),1)]))]),_:2},1024),i(B,{"enter-active-class":"animate__animated animate__slideInLeft","leave-active-class":"animate__animated animate__bounceOutRight"},{default:p(()=>[d[t.id]?(a(),c(z,{key:0,categoryData:t,mode:"update",onCreated:s[2]||(s[2]=v=>o(m)(!0))},null,8,["categoryData"])):n("",!0)]),_:2},1024)]),_:2},1032,["title","empty","header-icon","onHeaderIconClick","action-button-manager"]))),128))],64))}},rt={layout:M},Ct=Object.assign(rt,{__name:"ListCategories",props:{},setup(O){const l=k(["\u0410\u0434\u043C\u0438\u043D \u043F\u0430\u043D\u0435\u043B\u044C","\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u0442\u043E\u0432\u0430\u0440\u043E\u0432"]);return(u,g)=>(a(),r(h,null,[i(o(T),{title:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u0442\u043E\u0432\u0430\u0440\u043E\u0432"}),i(V,{"title-stack":l.value},null,8,["title-stack"]),i(L,null,{default:p(()=>[i(it)]),_:1})],64))}});export{Ct as default};
